{"version":3,"file":"js/720.548e9766.js","mappings":"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","sources":["webpack://ionic-car-trading/./src/hooks/chat/useChat.ts","webpack://ionic-car-trading/./src/components/Users/UserAvatar.vue","webpack://ionic-car-trading/./src/components/Users/UserAvatar.vue?bf7c","webpack://ionic-car-trading/./src/components/Chats/MessagesLayout.vue","webpack://ionic-car-trading/./src/components/Chats/MessagesLayout.vue?fb6d","webpack://ionic-car-trading/./src/functional/Chat/ChatManager.vue?4093","webpack://ionic-car-trading/./src/functional/Chat/ChatManager.vue","webpack://ionic-car-trading/./src/functional/Chat/ChatManager.vue?f9a1","webpack://ionic-car-trading/./src/components/Chats/ChatInput.vue?5564","webpack://ionic-car-trading/./node_modules/uuid/dist/esm-browser/native.js","webpack://ionic-car-trading/./node_modules/uuid/dist/esm-browser/rng.js","webpack://ionic-car-trading/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://ionic-car-trading/./node_modules/uuid/dist/esm-browser/v4.js","webpack://ionic-car-trading/./src/hooks/chat/useMessage.ts","webpack://ionic-car-trading/./src/components/Chats/ChatInput.vue","webpack://ionic-car-trading/./src/components/Chats/ChatInput.vue?b9f0","webpack://ionic-car-trading/./src/components/Chats/ChatMessage.vue?5a8d","webpack://ionic-car-trading/./src/components/Chats/ChatMessage.vue","webpack://ionic-car-trading/./src/components/Chats/ChatMessage.vue?3003","webpack://ionic-car-trading/./src/components/Chats/ChatMessages.vue?4190","webpack://ionic-car-trading/./src/components/Chats/ChatMessages.vue","webpack://ionic-car-trading/./src/components/Chats/ChatMessages.vue?62f1","webpack://ionic-car-trading/./src/views/Chat/MessagePage.vue?2637","webpack://ionic-car-trading/./src/views/Chat/MessagePage.vue","webpack://ionic-car-trading/./src/views/Chat/MessagePage.vue?55a8"],"sourcesContent":["import \"core-js/modules/es.array.includes.js\";\nimport { ref, reactive } from \"vue\";\nconst {\n  getAuthUser\n} = useAuthUser();\nconst currentUser = getAuthUser;\nconst chatState = reactive({\n  chatId: \"null\",\n  user: {\n    uid: \"\"\n  }\n});\nconst userChats = ref([]);\nfunction filterUserChats(searchStr) {\n  return userChats.value.filter(ele => ele[1].userInfo.displayName.includes(searchStr));\n}\nasync function setChatStateByUserId(uid) {\n  const payload = await getUserChatsByTargetID(getAuthUser.value.uid, uid);\n  console.log(payload);\n  setChatState(payload[1].userInfo);\n}\nfunction setChatState(payload) {\n  chatState.chatId = currentUser.value.uid > payload.uid ? currentUser.value.uid + payload.uid : payload.uid + currentUser.value.uid;\n  chatState.user = payload;\n}\nexport default function useChat() {\n  return {\n    chatState,\n    userChats,\n    setChatState,\n    filterUserChats,\n    setChatStateByUserId\n  };\n}","import { defineComponent as _defineComponent } from 'vue';\nimport { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport default /*#__PURE__*/_defineComponent({\n  props: [\"src\", \"alt\"],\n  setup(__props) {\n    return (_ctx, _cache) => {\n      const _component_ion_img = _resolveComponent(\"ion-img\");\n      return _openBlock(), _createBlock(_component_ion_img, {\n        alt: __props.alt,\n        src: __props.src\n      }, null, 8, [\"alt\", \"src\"]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./UserAvatar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./UserAvatar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./UserAvatar.vue?vue&type=style&index=0&id=7c013d27&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7c013d27\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createElementVNode as _createElementVNode, renderSlot as _renderSlot, openBlock as _openBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-eef00f8a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"messageInfo flex\"\n};\nimport BaseBackLayout from \"@/components/Common/BaseBackLayout.vue\";\nimport useChat from \"@/hooks/chat/useChat\";\nimport UserAvatar from \"../Users/UserAvatar.vue\";\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n    const {\n      chatState\n    } = useChat();\n    return (_ctx, _cache) => {\n      const _component_ion_title = _resolveComponent(\"ion-title\");\n      return _openBlock(), _createBlock(BaseBackLayout, {\n        default_href: '/chats'\n      }, {\n        title: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createVNode(UserAvatar, {\n          src: _unref(chatState).user.photoURL,\n          alt: \"user img\"\n        }, null, 8, [\"src\"]), _createVNode(_component_ion_title, null, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(_unref(chatState).user.displayName), 1)]),\n          _: 1\n        })])]),\n        default: _withCtx(() => [_renderSlot(_ctx.$slots, \"default\")]),\n        _: 3\n      });\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./MessagesLayout.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./MessagesLayout.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./MessagesLayout.vue?vue&type=style&index=0&id=eef00f8a&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-eef00f8a\"]])\n\nexport default __exports__","import { renderSlot as _renderSlot } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _renderSlot(_ctx.$slots, \"default\");\n}","import { defineComponent } from \"vue\";\nimport { handleChatGroupExist } from \"@/services/firebase\";\nimport useAuthUser from \"@/hooks//user/useAuthUser\";\nimport useChat from \"@/hooks/chat/useChat\";\nexport default defineComponent({\n  props: [\"dealerID\"],\n  async setup(props) {\n    const {\n      getAuthUser\n    } = useAuthUser();\n    const {\n      setChatStateByUserId\n    } = useChat();\n    await handleChatGroupExist(getAuthUser.value, props.dealerID);\n    await setChatStateByUserId(props.dealerID);\n    return {};\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./ChatManager.vue?vue&type=template&id=06909df8&ts=true\"\nimport script from \"./ChatManager.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatManager.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"h-16 p-3 flex items-center justify-between\"\n};\nconst _hoisted_2 = {\n  class: \"send flex items-center gap-2\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Send\");\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_button = _resolveComponent(\"ion-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"w-full outline-none\",\n    type: \"text\",\n    placeholder: \"Type something...\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.text = $event),\n    onKeyup: _cache[1] || (_cache[1] = _withKeys(async () => await _ctx.handleSend(), [\"enter\"]))\n  }, null, 544), [[_vModelText, _ctx.text]]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_ion_button, {\n    onClick: _cache[2] || (_cache[2] = async () => await _ctx.handleSend())\n  }, {\n    default: _withCtx(() => [_hoisted_3]),\n    _: 1\n  })])]);\n}","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { ref, watch, computed, reactive, Ref, compile } from \"vue\";\nimport useAuthUser from \"../user/useAuthUser\";\n\nimport {\n  arrayUnion,\n  doc,\n  onSnapshot,\n  serverTimestamp,\n  Timestamp,\n  updateDoc,\n} from \"@firebase/firestore\";\nimport { firebaseStore } from \"@/lib/firebase\";\nimport useChat from \"./useChat\";\nimport { v4 as uuid } from \"uuid\";\nimport { uploadImg } from \"@/services/firebase\";\nimport { Message } from \"@/model/Chats\";\n\nconst { getAuthUser } = useAuthUser();\nconst currentUser = getAuthUser;\n\nconst { chatState } = useChat();\nconst messages: Ref<Message[]> = ref([]);\n\nasync function sendImgMessage(text, file) {\n  const imgUrl = await uploadImg(file);\n\n  await updateDoc(doc(firebaseStore, \"chats\", chatState.chatId), {\n    messages: arrayUnion({\n      id: uuid(),\n      text,\n      senderId: currentUser.value.uid,\n      date: Timestamp.now(),\n      img: imgUrl,\n    }),\n  });\n}\n\nasync function sendMessage(text) {\n  await updateDoc(doc(firebaseStore, \"chats\", chatState.chatId), {\n    messages: arrayUnion({\n      id: uuid(),\n      text,\n      senderId: currentUser.value.uid,\n      date: Timestamp.now(),\n    }),\n  });\n  await updateUserChats(text, currentUser.value.uid);\n}\n\nasync function updateUserChats(text, senderId) {\n  await updateDoc(doc(firebaseStore, \"userChats\", currentUser.value.uid), {\n    [chatState.chatId + \".lastMessage\"]: { text, senderId },\n    [chatState.chatId + \".date\"]: serverTimestamp(),\n  });\n\n  await updateDoc(doc(firebaseStore, \"userChats\", chatState.user.uid), {\n    [chatState.chatId + \".lastMessage\"]: { text, senderId },\n    [chatState.chatId + \".date\"]: serverTimestamp(),\n  });\n}\n\nexport default function useMessage() {\n  onSnapshot(doc(firebaseStore, \"chats\", chatState.chatId), (doc) => {\n    console.log(doc.data());\n    if (doc.exists()) {\n      messages.value = doc.data().messages;\n    }\n  });\n\n  return {\n    messages,\n    sendImgMessage,\n    sendMessage,\n  };\n}\n","import { defineComponent, ref } from \"vue\";\nimport useMessage from \"@/hooks/chat/useMessage\";\nexport default defineComponent({\n  setup() {\n    const {\n      sendImgMessage,\n      sendMessage\n    } = useMessage();\n    const text = ref(\"\");\n    const img = ref(null);\n    const handleSend = async () => {\n      if (img.value) {\n        await sendImgMessage(text.value, img.value);\n      } else if (text.value) {\n        await sendMessage(text.value);\n      }\n      text.value = \"\";\n      img.value = null;\n    };\n    return {\n      text,\n      img,\n      handleSend\n    };\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./ChatInput.vue?vue&type=template&id=1f982ac0&ts=true\"\nimport script from \"./ChatInput.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatInput.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-17956fc1\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"messageContent flex flex-col gap-2\"\n};\nconst _hoisted_2 = {\n  class: \"relative\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    ref: \"self\",\n    class: _normalizeClass([\"message flex gap-5 mb-4 mx-3 mt-1\", _ctx.message.senderId === _ctx.getAuthUser.uid && 'owner'])\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", null, [_createElementVNode(\"p\", _hoisted_2, [_createElementVNode(\"span\", null, _toDisplayString(_ctx.message.text), 1), _createElementVNode(\"small\", null, _toDisplayString(_ctx.moment(_ctx.message.date.toDate()).format(\"DD MMM HH:mm\")), 1)])])])], 2);\n}","import { defineComponent, onMounted, ref } from \"vue\";\nimport useAuthUser from \"@/hooks/user/useAuthUser\";\nimport useChat from \"@/hooks/chat/useChat\";\nimport moment from \"moment\";\nexport default defineComponent({\n  props: [\"message\"],\n  setup() {\n    const self = ref();\n    const {\n      getAuthUser\n    } = useAuthUser();\n    const {\n      chatState\n    } = useChat();\n    const userInfo = chatState.user;\n    onMounted(() => {\n      self.value?.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    });\n    return {\n      getAuthUser,\n      userInfo,\n      self,\n      moment\n    };\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./ChatMessage.vue?vue&type=template&id=17956fc1&scoped=true&ts=true\"\nimport script from \"./ChatMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatMessage.vue?vue&type=style&index=0&id=17956fc1&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-17956fc1\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-25e7f780\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"messages overflow-y-scroll\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ChatMessage = _resolveComponent(\"ChatMessage\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.messages, m => {\n    return _openBlock(), _createBlock(_component_ChatMessage, {\n      key: m.id,\n      message: m\n    }, null, 8, [\"message\"]);\n  }), 128))]);\n}","import { defineComponent } from \"vue\";\nimport ChatMessage from \"@/components/Chats/ChatMessage.vue\";\nimport useMessage from \"@/hooks/chat/useMessage\";\nexport default defineComponent({\n  components: {\n    ChatMessage\n  },\n  setup() {\n    const {\n      messages\n    } = useMessage();\n    return {\n      messages\n    };\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./ChatMessages.vue?vue&type=template&id=25e7f780&scoped=true&ts=true\"\nimport script from \"./ChatMessages.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatMessages.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatMessages.vue?vue&type=style&index=0&id=25e7f780&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-25e7f780\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, Suspense as _Suspense, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ChatMessages = _resolveComponent(\"ChatMessages\");\n  const _component_ChatInput = _resolveComponent(\"ChatInput\");\n  const _component_chat_manager = _resolveComponent(\"chat-manager\");\n  const _component_ion_loading = _resolveComponent(\"ion-loading\");\n  const _component_MessagesLayout = _resolveComponent(\"MessagesLayout\");\n  return _openBlock(), _createBlock(_component_MessagesLayout, null, {\n    default: _withCtx(() => [(_openBlock(), _createBlock(_Suspense, null, {\n      default: _withCtx(() => [_createVNode(_component_chat_manager, {\n        dealerID: _ctx.routeDealerID\n      }, {\n        default: _withCtx(() => [_createVNode(_component_ChatMessages), _createVNode(_component_ChatInput)]),\n        _: 1\n      }, 8, [\"dealerID\"])]),\n      fallback: _withCtx(() => [_createVNode(_component_ion_loading)]),\n      _: 1\n    }))]),\n    _: 1\n  });\n}","import MessagesLayout from \"@/components/Chats/MessagesLayout.vue\";\nimport { defineComponent } from \"vue\";\nimport ChatMessages from \"@/components/Chats/ChatMessages.vue\";\nimport ChatInput from \"@/components/Chats/ChatInput.vue\";\nimport { useRoute } from \"vue-router\";\nimport { IonLoading } from \"@ionic/vue\";\nimport ChatManager from \"@/functional/Chat/ChatManager.vue\";\nexport default defineComponent({\n  components: {\n    MessagesLayout,\n    ChatMessages,\n    ChatInput,\n    IonLoading,\n    ChatManager\n  },\n  setup() {\n    const route = useRoute();\n    const routeDealerID = route.params.dealerID;\n    return {\n      routeDealerID\n    };\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./MessagePage.vue?vue&type=template&id=45a90a18&ts=true\"\nimport script from \"./MessagePage.vue?vue&type=script&lang=ts\"\nexport * from \"./MessagePage.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["getAuthUser","currentUser","chatState","chatId","user","uid","userChats","filterUserChats","searchStr","value","filter","ele","userInfo","displayName","includes","async","setChatStateByUserId","payload","console","log","setChatState","useChat","props","setup","__props","_ctx","_cache","_component_ion_img","alt","src","__exports__","_hoisted_1","class","_component_ion_title","BaseBackLayout","default_href","title","_","UserAvatar","photoURL","default","$slots","render","$props","$setup","$data","$options","useAuthUser","dealerID","_hoisted_2","_hoisted_3","_component_ion_button","type","placeholder","$event","text","onKeyup","handleSend","onClick","randomUUID","crypto","bind","getRandomValues","rnds8","Uint8Array","rng","Error","byteToHex","i","push","toString","slice","unsafeStringify","arr","offset","toLowerCase","v4","options","buf","rnds","random","messages","ref","sendImgMessage","file","imgUrl","uploadImg","updateDoc","doc","firebaseStore","arrayUnion","id","uuid","senderId","date","Timestamp","img","sendMessage","updateUserChats","serverTimestamp","useMessage","onSnapshot","data","exists","message","moment","toDate","format","self","scrollIntoView","behavior","_component_ChatMessage","m","key","components","ChatMessage","_component_ChatMessages","_component_ChatInput","_component_chat_manager","_component_ion_loading","_component_MessagesLayout","routeDealerID","fallback","MessagesLayout","ChatMessages","ChatInput","IonLoading","ChatManager","route","params"],"sourceRoot":""}
"use strict";(self["webpackChunkionic_car_trading"]=self["webpackChunkionic_car_trading"]||[]).push([[318],{8206:function(e,t,n){n.d(t,{ZP:function(){return g}});n(6699);var l=n(2262),o=n(6252),i=n(1694);const s=(0,l.iH)(),a=(0,l.iH)(),{getModelFilterByBrandModel:r,addModelFilter:c,removeModelFilter:u}=(0,i.Z)();function d(e){return"generation"==e?(0,o.Fl)((()=>a.value)):(0,o.Fl)((()=>s.value))}function f(e){return"generation"==e?e=>(0,o.Fl)((()=>a.value.includes(e))):e=>(0,o.Fl)((()=>s.value.includes(e)))}function m(e,t){if("generation"==e)if(f(e)(t).value){const e=a.value.indexOf(t);a.value.splice(e,1)}else a.value.push(t);else if(f(e)(t).value){const e=s.value.indexOf(t);s.value.splice(e,1)}else s.value.push(t);console.log(a)}function p(){a.value=[],s.value=[]}function g(e,t){const n=r(e,t).value;function l(){a.value=[...n.generationList.value],s.value=[...n.versionList.value]}function o(e){console.log("commit call"),n.setCategoryModel(e),n.generationList.value=a.value,n.versionList.value=s.value}return{getFilterList:d,handleSelect:m,commit:o,clearFilterList:p,fetchCurrentValue:l,isSelected:f}}},7456:function(e,t,n){n.d(t,{Z:function(){return g}});var l=n(2262);const o=(0,l.qj)({lastname:null,firstname:null,email:null,phoneNumber:null,secPhoneNUmber:null});function i(e,t){o[e]=t}function s(e){o[e]=null}function a(){for(const e in o)s(e)}function r(e){return o[e]}function c(e){return null==o[e]}function u(e){for(const t in e)if(c(t))return!0;return!1}const d=(0,l.qj)({invalidity:!0});function f(e){return d.invalidity=e,d.invalidity}function m(){return d.invalidity}function p(e,t){return o[e]==t}function g(){return{_carSellContact:o,setCarSellContactValue:i,getCarSellContactValue:r,resetCarSellContactValue:s,resetCarSellContactsValue:a,isNullCarSellContactByCate:c,isNullCarSellContacts:u,findValueFromCate:p,contactDataAreValid:d,contactDataInvalidity:f,returnContactInvalidity:m}}},1098:function(e,t,n){n.d(t,{Z:function(){return k}});var l=n(2262),o=n(5052),i=n(5586),s=n(7456);const{_carSellContact:a}=(0,s.Z)(),{getAuthUser:r}=(0,o.Z)(),c=(0,l.qj)({imgs:[],car_id:null,dealerID:null,"Listing Price":null,"Factory options":null,"Aftermarket options":null,Location:null,mileage:null,isRegister:!0,"Expired Date":null,"VIN number":null,"Exterior Colour":null,"Manufactor Listed Colour":null,"Interior Colour":null,"Seller type":null,services:[],Comments:null,front_rim:null,rear_rim:null,front_tyre:null,rear_tyre:null,tyre_model:null,built_year:null,transmission:null});function u(e,t){c[e]=t}function d(e){c[e]=null}function f(){for(const e in c)d(e)}function m(e){return console.log(e),c[e]}function p(e){return null==c[e]}function g(e){for(const t in e)if(p(t))return!0;return!1}const v=(0,l.qj)({invalidity:!0});function y(e){return v.invalidity=e,v.invalidity}function _(){return v.invalidity}function C(e,t){return c[e]==t}function h(){const e=new FormData;e.append("dealerID",r.value.uid),console.log(c);for(const t in c)Array.isArray(c[t])?c[t].length>0&&c[t].forEach((n=>{e.append(t,n)})):c[t]&&e.append(t,c[t]);for(const t in a)a[t]&&e.append(t,a[t]);return e}async function P(){const e=e=>[...e].reduce(((e,[t,n])=>e+("string"===typeof n?n.length:n.size)),0),t=h();console.log("formdata size %i Bytes",e(t));const n=await(0,i.Z)(!1)("/api/car-posts",{method:"POST",body:t});console.log(n);const{success:l,data:o,message:s}=n;return l?(console.log(o),c.post_id=o.post_id):console.log(s),{success:l,message:s}}async function w(e){const t=await(0,i.Z)()("/confirm-payment/"+e,{method:"POST"}),{success:n}=t;return n}function k(){return{setCarSellPostValue:u,getCarSellPostValue:m,resetCarSellPostValue:d,resetCarSellPostsValue:f,isNullCarSellPostByCate:p,isNullCarSellPosts:g,findValueFromCate:C,createPost:P,confirmPayment:w,formDataInvalidity:y,returnFormInvalidity:_}}},5951:function(e,t,n){n.d(t,{O:function(){return a}});var l=n(9876),o=n(5586),i=n(1098);const{getCarSellPostValue:s}=(0,i.Z)(),a=(0,l.Q_)("adPackageStore",{state:()=>({selectPackage:null,price:null,amount:null}),actions:{async fetchProducts(){const e=await(0,o.Z)()("/products"),{success:t,data:n}=e;if(t)return n},async confirmPayment(e){const t=await(0,o.Z)()("/confirm-payment/"+e,{method:"POST"}),{success:n}=t;return n},async proceedPaymemnt(){const e=s("post_id"),t=await(0,o.Z)()("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lineItems:[{price:this.price,quantity:1}],success_url:"http://archiiii.github.io/tabs/sell-car/payment-success",cancel_url:"http://archiiii.github.io/tabs/sell-car/ad-select",amount:this.amount,post_id:e})}),{url:n,session_id:l}=t;console.log(n),window.location.replace(n)}}})},1120:function(e,t,n){n.d(t,{rh:function(){return l.r},iZ:function(){return r},GD:function(){return d}});var l=n(6427),o=n(9876),i=n(5586),s=n(8839),a=n(4934);const r=(0,o.Q_)("managePostStore",{state:()=>({managePostList:[]}),getters:{getManagePost:e=>t=>{const n=e.managePostList.filter((e=>e.post_id==t))[0];return console.log(n),n}},actions:{async fetchManagePost(e){try{const t=await(0,i.Z)()(`/api/car-posts/manage/${e}`,{method:"GET"}),{success:n,data:l,message:o}=t;if(n){const e=(0,a.yE)(s.f,l);return this.managePostList=e,l}return o}catch(t){console.log(t)}}}});var c=n(8206),u=n(6252);const d=(0,o.Q_)("modelDetailsStore",{state:()=>({getFilterList:e=>(0,u.Fl)((()=>[])),generationList:[],versionList:[],dependArray:[]}),getters:{isVersionDisabled:e=>t=>{const n=e.getFilterList("generation"),l=n.value.map((t=>{const n=e.generationList.indexOf(t);return e.dependArray[n]})),o=e=>e[t];return!l.every(o)},isGenerationDisabled:e=>t=>{const n=e.getFilterList("version"),l=n.value.map((t=>{const n=e.versionList.indexOf(t);return n})),o=n=>e.dependArray[t][n];return!l.every(o)}},actions:{async fetchModelGenerationVersion(e,t){const{getFilterList:n}=(0,c.ZP)(e,t);this.getFilterList=n;try{const e=await(0,i.Z)()("/api/options/car-model-details/"+t),{success:n,data:l,message:o}=e;n&&(this.generationList=l.generationsList,this.versionList=l.versionList,this.dependArray=l.dependArray)}catch(l){console.log(l)}}}});n(5951)},815:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var l=n(7115),o=n(1989),i=n(6252);const s=e=>((0,i.dD)("data-v-794c4124"),e=e(),(0,i.Cn)(),e),a={class:"wrapper"},r=s((()=>(0,i._)("h1",{class:"text-xl"},"Confirm mark as sold",-1))),c={class:"mt-3 flex justify-end"},u=(0,i.Uk)("Close"),d=(0,i.Uk)("Confirm");function f(e,t,n,l,s,f){const m=o.YG,p=o.ki;return(0,i.wg)(),(0,i.j4)(p,{id:"post-dialog",ref:"modal",trigger:"sold-post-modal-"+e.post_id,onWillDismiss:e.onWillDismiss},{default:(0,i.w5)((()=>[(0,i._)("div",a,[r,(0,i._)("div",c,[(0,i.Wm)(m,{color:"danger",size:"small",fill:"clear",onClick:e.cancel},{default:(0,i.w5)((()=>[u])),_:1},8,["onClick"]),(0,i.Wm)(m,{size:"small",onClick:e.confirm},{default:(0,i.w5)((()=>[d])),_:1},8,["onClick"])])])])),_:1},8,["trigger","onWillDismiss"])}var m=n(2262),p=(0,i.aZ)({components:{IonModal:o.ki},props:["post_id"],setup(e){const t=(0,m.iH)(),n=()=>{t.value?.$el.dismiss(null,"cancel")},l=()=>{t.value?.$el.dismiss(null,"confirm")},o=async e=>{"confirm"===e.detail.role&&console.log("sold")};return{cancel:n,modal:t,confirm:l,onWillDismiss:o}}}),g=n(3744);const v=(0,g.Z)(p,[["render",f],["__scopeId","data-v-794c4124"]]);var y=v;const _=e=>((0,i.dD)("data-v-20f58db1"),e=e(),(0,i.Cn)(),e),C={class:"wrapper"},h=_((()=>(0,i._)("h1",{class:"text-xl"},"Confirm delete this post",-1))),P={class:"mt-3 flex justify-end"},w=(0,i.Uk)("Close"),k=(0,i.Uk)("Confirm");function S(e,t,n,l,s,a){const r=o.YG,c=o.ki;return(0,i.wg)(),(0,i.j4)(c,{id:"post-dialog",ref:"modal",trigger:"delete-post-modal-"+e.post_id,onWillDismiss:e.onWillDismiss},{default:(0,i.w5)((()=>[(0,i._)("div",C,[h,(0,i._)("div",P,[(0,i.Wm)(r,{color:"danger",size:"small",fill:"clear",onClick:e.cancel},{default:(0,i.w5)((()=>[w])),_:1},8,["onClick"]),(0,i.Wm)(r,{size:"small",onClick:e.confirm},{default:(0,i.w5)((()=>[k])),_:1},8,["onClick"])])])])),_:1},8,["trigger","onWillDismiss"])}var Z=(0,i.aZ)({components:{IonModal:o.ki},props:["post_id"],setup(e){const t=(0,m.iH)(),n=()=>{t.value?.$el.dismiss(null,"cancel")},l=()=>{t.value?.$el.dismiss(null,"confirm")},o=async e=>{"confirm"===e.detail.role&&console.log("delete")};return{cancel:n,modal:t,confirm:l,onWillDismiss:o}}});const D=(0,g.Z)(Z,[["render",S],["__scopeId","data-v-20f58db1"]]);var L=D,F=n(6924),W=n(5601),I=n(9963);const b=(0,i.Uk)("Make as Sold"),V=(0,i.Uk)("Edit Listing"),M=(0,i.Uk)("Delete"),x={class:"border-t mt-2 py-2"};function j(e,t,n,s,a,r){const c=(0,i.up)("font-awesome-icon"),u=o.n0,d=o.t9,f=o.YG,m=W.Z,p=F.Z,g=L,v=y,_=l.Z;return(0,i.wg)(),(0,i.j4)(_,null,{primary:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[e.isPlatform("ios")?((0,i.wg)(),(0,i.j4)(c,{key:0,slot:"icon-only",class:"w-12",icon:["fas","fa-ellipsis"]})):((0,i.wg)(),(0,i.j4)(c,{key:1,slot:"icon-only",class:"w-12",icon:"fa-solid fa-ellipsis-vertical"})),(0,i.Wm)(d,{onIonChange:e.selectEvent,interface:"popover",class:"hover-none",selectedText:"null"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{value:"sold"},{default:(0,i.w5)((()=>[b])),_:1}),(0,i.Wm)(u,{value:"edit-listing"},{default:(0,i.w5)((()=>[V])),_:1}),(0,i.Wm)(u,{value:"delete"},{default:(0,i.w5)((()=>[M])),_:1})])),_:1},8,["onIonChange"])])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(m,{postDisplay:e.carPost,own:""},null,8,["postDisplay"]),(0,i._)("div",x,[(0,i.Wm)(p,{postDisplay:e.carPost},null,8,["postDisplay"])]),(0,i.Wm)(g,{post_id:e.post_id},null,8,["post_id"]),(0,i.Wm)(v,{post_id:e.post_id},null,8,["post_id"]),(0,i.wy)((0,i.Wm)(f,{ref:"deleteBtn",id:"delete-post-modal-"+e.post_id},null,8,["id"]),[[I.F8,!1]]),(0,i.wy)((0,i.Wm)(f,{ref:"soldBtn",id:"sold-post-modal-"+e.post_id},null,8,["id"]),[[I.F8,!1]])])),_:1})}var B=n(5241),A=n(9079),O=n(9732),U=n(1120),E=(0,i.aZ)({name:"CarPostPage",components:{BaseBackLayout:l.Z,IonSelect:o.t9,IonSelectOption:o.n0,PostIntroContainer:W.Z,PostDetailContainer:F.Z,DeletePostModal:L,SoldPostModal:y},props:["post_id"],setup(e){const t=(0,m.iH)(),n=(0,m.iH)(),l=(0,U.iZ)(),o=l.getManagePost(e.post_id),{getActiveHomeSlideByType:s}=(0,A.Z)(),a=s("Car news"),r=({detail:e})=>{"delete"==e.value&&t.value?.$el.click(),"sold"==e.value&&n.value?.$el.click()};return(0,i.bv)((()=>{console.log(t)})),{targetSlide:a,priceFormatter:O.L6,isPlatform:B.a,carPost:o,deleteBtn:t,soldBtn:n,selectEvent:r}}});const N=(0,g.Z)(E,[["render",j],["__scopeId","data-v-5d3c1dac"]]);var T=N}}]);
//# sourceMappingURL=318.f995bfb7.js.map
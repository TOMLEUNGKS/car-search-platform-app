{"version":3,"file":"js/1728.b04d9d91.js","mappings":"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","sources":["webpack://ionic-car-trading/./node_modules/@capacitor/camera/dist/esm/definitions.js","webpack://ionic-car-trading/./node_modules/@capacitor/camera/dist/esm/index.js","webpack://ionic-car-trading/./node_modules/@capacitor/filesystem/dist/esm/definitions.js","webpack://ionic-car-trading/./node_modules/@capacitor/filesystem/dist/esm/index.js","webpack://ionic-car-trading/./src/hooks/useLoading.ts","webpack://ionic-car-trading/./src/components/Users/EditContainer.vue","webpack://ionic-car-trading/./src/components/Users/EditContainer.vue?0e14","webpack://ionic-car-trading/./src/views/User/EditPage.vue?322a","webpack://ionic-car-trading/./src/views/User/EditPage.vue","webpack://ionic-car-trading/./src/views/User/EditPage.vue?8e75"],"sourcesContent":["export var CameraSource;\n(function (CameraSource) {\n    /**\n     * Prompts the user to select either the photo album or take a photo.\n     */\n    CameraSource[\"Prompt\"] = \"PROMPT\";\n    /**\n     * Take a new photo using the camera.\n     */\n    CameraSource[\"Camera\"] = \"CAMERA\";\n    /**\n     * Pick an existing photo from the gallery or photo album.\n     */\n    CameraSource[\"Photos\"] = \"PHOTOS\";\n})(CameraSource || (CameraSource = {}));\nexport var CameraDirection;\n(function (CameraDirection) {\n    CameraDirection[\"Rear\"] = \"REAR\";\n    CameraDirection[\"Front\"] = \"FRONT\";\n})(CameraDirection || (CameraDirection = {}));\nexport var CameraResultType;\n(function (CameraResultType) {\n    CameraResultType[\"Uri\"] = \"uri\";\n    CameraResultType[\"Base64\"] = \"base64\";\n    CameraResultType[\"DataUrl\"] = \"dataUrl\";\n})(CameraResultType || (CameraResultType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Camera = registerPlugin('Camera', {\n    web: () => import('./web').then(m => new m.CameraWeb()),\n});\nexport * from './definitions';\nexport { Camera };\n//# sourceMappingURL=index.js.map","export var Directory;\n(function (Directory) {\n    /**\n     * The Documents directory\n     * On iOS it's the app's documents directory.\n     * Use this directory to store user-generated content.\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Documents\"] = \"DOCUMENTS\";\n    /**\n     * The Data directory\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Data\"] = \"DATA\";\n    /**\n     * The Library directory\n     * On iOS it will use the Library directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.1.0\n     */\n    Directory[\"Library\"] = \"LIBRARY\";\n    /**\n     * The Cache directory\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files\n     * that your app can re-create easily.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Cache\"] = \"CACHE\";\n    /**\n     * The external directory\n     * On iOS it will use the Documents directory\n     * On Android it's the directory on the primary shared/external\n     * storage device where the application can place persistent files it owns.\n     * These files are internal to the applications, and not typically visible\n     * to the user as media.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"External\"] = \"EXTERNAL\";\n    /**\n     * The external storage directory\n     * On iOS it will use the Documents directory\n     * On Android it's the primary shared/external storage directory.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\n})(Directory || (Directory = {}));\nexport var Encoding;\n(function (Encoding) {\n    /**\n     * Eight-bit UCS Transformation Format\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF8\"] = \"utf8\";\n    /**\n     * Seven-bit ASCII, a.k.a. ISO646-US, a.k.a. the Basic Latin block of the\n     * Unicode character set\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"ASCII\"] = \"ascii\";\n    /**\n     * Sixteen-bit UCS Transformation Format, byte order identified by an\n     * optional byte-order mark\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF16\"] = \"utf16\";\n})(Encoding || (Encoding = {}));\n/**\n * @deprecated Use `Directory`.\n * @since 1.0.0\n */\nexport const FilesystemDirectory = Directory;\n/**\n * @deprecated Use `Encoding`.\n * @since 1.0.0\n */\nexport const FilesystemEncoding = Encoding;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Filesystem = registerPlugin('Filesystem', {\n    web: () => import('./web').then(m => new m.FilesystemWeb()),\n});\nexport * from './definitions';\nexport { Filesystem };\n//# sourceMappingURL=index.js.map","import { loadingController } from \"@ionic/vue\";\n\nlet loading;\n\nexport const showLoading = async () => {\n  loading = await loadingController.create({});\n\n  loading.present();\n};\nexport const closeLoading = async () => {\n  if (loading) {\n    loading.dismiss();\n  }\n};\n","/* unplugin-vue-components disabled */import { IonInput as __unplugin_components_2 } from '@ionic/vue';\nimport { IonThumbnail as __unplugin_components_1 } from '@ionic/vue';\nimport { IonButton as __unplugin_components_0 } from '@ionic/vue';\nimport { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"formContainer flex items-center justify-center\"\n};\nconst _hoisted_2 = {\n  class: \"formWrapper flex flex-col items-center p-6 gap-4\"\n};\nconst _hoisted_3 = [\"onSubmit\"];\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"Save\");\nconst _hoisted_6 = {\n  key: 0,\n  class: \"text-red-500\"\n};\nimport { ref } from \"vue\";\nimport useUser from \"@/hooks/user/useUser\";\nimport { updateUserProfile, uploadImg } from \"@/services/firebase\";\nimport { showLoading, closeLoading } from \"@/hooks/useLoading\";\nimport { isPlatform } from \"@ionic/vue\";\nimport { Camera, CameraResultType } from \"@capacitor/camera\";\nimport { Filesystem } from \"@capacitor/filesystem\";\nimport moment from \"moment\";\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n    const {\n      getUser,\n      setUser\n    } = useUser();\n    const router = useRouter();\n    const isMobile = isPlatform(\"mobile\");\n    const displayName = ref(getUser.value.displayName);\n    const photoURL = ref(getUser.value.photoURL);\n    const fileHolder = ref(null);\n    const errorMsg = ref(\"\");\n    const filesChange = fileList => {\n      const file = fileList[0];\n      const url = URL.createObjectURL(file);\n      photoURL.value = url;\n      fileHolder.value = file;\n    };\n    const takePhoto = async () => {\n      const b64toBlob = (base64, type = \"application/octet-stream\") => fetch(`data:${type};base64,${base64}`).then(res => res.blob());\n      if (isMobile) {\n        const image = await Camera.getPhoto({\n          quality: 90,\n          resultType: CameraResultType.Uri\n        });\n        // image.webPath will contain a path that can be set as an image src.\n        // You can access the original file using image.path, which can be\n        // passed to the Filesystem API to read the raw data of the image,\n        // if desired (or pass resultType: CameraResultType.Base64 to getPhoto)\n        const imageUrl = image.webPath;\n        const imagePath = image.path;\n        const contents = await Filesystem.readFile({\n          path: imagePath\n        });\n        const blob = await b64toBlob(contents.data);\n        const fileName = imagePath.split(\"/\")[imagePath.split(\"/\").length - 1];\n        const file = new File([blob], fileName, {\n          lastModified: moment().unix(),\n          type: image.format\n        });\n        // Can be set to the src of an image now\n        if (imageUrl) {\n          photoURL.value = imageUrl;\n          fileHolder.value = file;\n        }\n      }\n    };\n    const handleSubmit = async () => {\n      await showLoading();\n      // save new displayName in firebase users table\n      // upload the new thumbnail to firebase storage and get the link then save in firebase users table\n      let url = photoURL.value;\n      if (fileHolder.value) {\n        url = await uploadImg(fileHolder.value);\n      }\n      await updateUserProfile(getUser.value.uid, displayName.value, url);\n      await setUser(getUser.value.uid);\n      await closeLoading();\n      router.replace(\"/tabs/account\");\n    };\n    return (_ctx, _cache) => {\n      const _component_ion_button = __unplugin_components_0;\n      const _component_ion_thumbnail = __unplugin_components_1;\n      const _component_ion_input = __unplugin_components_2;\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"form\", {\n        class: \"flex flex-col gap-3 items-center\",\n        onSubmit: _withModifiers(handleSubmit, [\"prevent\"])\n      }, [_createVNode(_component_ion_thumbnail, {\n        class: \"bg-gray-200 rounded-full mx-4 w-32 h-32 relative cursor-pointer flex\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"img\", {\n          src: photoURL.value || 'assets/icon/account-user.svg',\n          class: \"p-0 rounded-full object-cover\"\n        }, null, 8, _hoisted_4), _createVNode(_component_ion_button, {\n          onClick: takePhoto,\n          color: \"light\",\n          class: \"absolute w-full h-full opacity-0 top-0\"\n        }, {\n          default: _withCtx(() => [!_unref(isMobile) ? (_openBlock(), _createElementBlock(\"input\", {\n            key: 0,\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: _cache[0] || (_cache[0] = $event => filesChange($event.target.files))\n          }, null, 32)) : _createCommentVNode(\"\", true)]),\n          _: 1\n        })]),\n        _: 1\n      }), _createVNode(_component_ion_input, {\n        class: \"w-80 p-4 border-b border-b-primary\",\n        type: \"text\",\n        modelValue: displayName.value,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => displayName.value = $event),\n        placeholder: 'display name'\n      }, null, 8, [\"modelValue\"]), _createVNode(_component_ion_button, {\n        class: \"w-full\",\n        type: \"submit\"\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 1\n      })], 40, _hoisted_3), errorMsg.value ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(errorMsg.value), 1)) : _createCommentVNode(\"\", true)])]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./EditContainer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EditContainer.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_EditContainer = _resolveComponent(\"EditContainer\");\n  const _component_base_back_layout = _resolveComponent(\"base-back-layout\");\n  return _openBlock(), _createBlock(_component_base_back_layout, null, {\n    default: _withCtx(() => [_createVNode(_component_EditContainer)]),\n    _: 1\n  });\n}","import { defineComponent } from \"vue\";\nimport BaseBackLayout from \"@/components/Common/BaseBackLayout.vue\";\nimport EditContainer from \"@/components/Users/EditContainer.vue\";\nexport default defineComponent({\n  components: {\n    BaseBackLayout,\n    EditContainer\n  },\n  setup() {\n    return;\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./EditPage.vue?vue&type=template&id=ba7ace24&ts=true\"\nimport script from \"./EditPage.vue?vue&type=script&lang=ts\"\nexport * from \"./EditPage.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["CameraSource","CameraDirection","CameraResultType","Camera","web","then","m","CameraWeb","Directory","Encoding","Filesystem","FilesystemWeb","loading","showLoading","async","loadingController","present","closeLoading","dismiss","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","key","setup","__props","getUser","setUser","useUser","router","isMobile","displayName","value","photoURL","fileHolder","errorMsg","filesChange","fileList","file","url","URL","createObjectURL","takePhoto","b64toBlob","base64","type","fetch","res","blob","image","quality","resultType","imageUrl","webPath","imagePath","path","contents","data","fileName","split","length","File","lastModified","unix","format","handleSubmit","uid","replace","_ctx","_cache","_component_ion_button","_component_ion_thumbnail","_component_ion_input","_","onSubmit","default","src","onClick","color","accept","onChange","$event","target","files","modelValue","placeholder","__exports__","render","$props","$setup","$data","$options","_component_EditContainer","_component_base_back_layout","components","BaseBackLayout","EditContainer"],"sourceRoot":""}
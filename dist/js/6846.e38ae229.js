"use strict";(self["webpackChunkionic_car_trading"]=self["webpackChunkionic_car_trading"]||[]).push([[6846],{8206:function(e,t,n){n.d(t,{ZP:function(){return p}});n(6699);var a=n(2262),s=n(6252),o=n(1694);const r=(0,a.iH)(),l=(0,a.iH)(),{getModelFilterByBrandModel:i,addModelFilter:c,removeModelFilter:u}=(0,o.Z)();function d(e){return"generation"==e?(0,s.Fl)((()=>l.value)):(0,s.Fl)((()=>r.value))}function f(e){return"generation"==e?e=>(0,s.Fl)((()=>l.value.includes(e))):e=>(0,s.Fl)((()=>r.value.includes(e)))}function g(e,t){if("generation"==e)if(f(e)(t).value){const e=l.value.indexOf(t);l.value.splice(e,1)}else l.value.push(t);else if(f(e)(t).value){const e=r.value.indexOf(t);r.value.splice(e,1)}else r.value.push(t);console.log(l)}function m(){l.value=[],r.value=[]}function p(e,t){const n=i(e,t).value;function a(){l.value=[...n.generationList.value],r.value=[...n.versionList.value]}function s(e){console.log("commit call"),n.setCategoryModel(e),n.generationList.value=l.value,n.versionList.value=r.value}return{getFilterList:d,handleSelect:g,commit:s,clearFilterList:m,fetchCurrentValue:a,isSelected:f}}},7456:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(2262);const s=(0,a.qj)({lastname:null,firstname:null,email:null,phoneNumber:null,secPhoneNUmber:null});function o(e,t){s[e]=t}function r(e){s[e]=null}function l(){for(const e in s)r(e)}function i(e){return s[e]}function c(e){return null==s[e]}function u(e){for(const t in e)if(c(t))return!0;return!1}const d=(0,a.qj)({invalidity:!0});function f(e){return d.invalidity=e,d.invalidity}function g(){return d.invalidity}function m(e,t){return s[e]==t}function p(){return{_carSellContact:s,setCarSellContactValue:o,getCarSellContactValue:i,resetCarSellContactValue:r,resetCarSellContactsValue:l,isNullCarSellContactByCate:c,isNullCarSellContacts:u,findValueFromCate:m,contactDataAreValid:d,contactDataInvalidity:f,returnContactInvalidity:g}}},1098:function(e,t,n){n.d(t,{Z:function(){return h}});var a=n(2262),s=n(5052),o=n(5586),r=n(7456);const{_carSellContact:l}=(0,r.Z)(),{getAuthUser:i}=(0,s.Z)(),c=(0,a.qj)({imgs:[],car_id:null,dealerID:null,"Listing Price":null,"Factory options":null,"Aftermarket options":null,Location:null,mileage:null,isRegister:!0,"Expired Date":null,"VIN number":null,"Exterior Colour":null,"Manufactor Listed Colour":null,"Interior Colour":null,"Seller type":null,services:[],Comments:null,front_rim:null,rear_rim:null,front_tyre:null,rear_tyre:null,tyre_model:null,built_year:null,transmission:null});function u(e,t){c[e]=t}function d(e){c[e]=null}function f(){for(const e in c)d(e)}function g(e){return console.log(e),c[e]}function m(e){return null==c[e]}function p(e){for(const t in e)if(m(t))return!0;return!1}const y=(0,a.qj)({invalidity:!0});function v(e){return y.invalidity=e,y.invalidity}function w(){return y.invalidity}function _(e,t){return c[e]==t}function S(){const e=new FormData;e.append("dealerID",i.value.uid),console.log(c);for(const t in c)Array.isArray(c[t])?c[t].length>0&&c[t].forEach((n=>{e.append(t,n)})):c[t]&&e.append(t,c[t]);for(const t in l)l[t]&&e.append(t,l[t]);return e}async function k(){const e=e=>[...e].reduce(((e,[t,n])=>e+("string"===typeof n?n.length:n.size)),0),t=S();console.log("formdata size %i Bytes",e(t));const n=await(0,o.Z)(!1)("/api/car-posts",{method:"POST",body:t});console.log(n);const{success:a,data:s,message:r}=n;return a?(console.log(s),c.post_id=s.post_id):console.log(r),{success:a,message:r}}async function C(e){const t=await(0,o.Z)()("/confirm-payment/"+e,{method:"POST"}),{success:n}=t;return n}function h(){return{setCarSellPostValue:u,getCarSellPostValue:g,resetCarSellPostValue:d,resetCarSellPostsValue:f,isNullCarSellPostByCate:m,isNullCarSellPosts:p,findValueFromCate:_,createPost:k,confirmPayment:C,formDataInvalidity:v,returnFormInvalidity:w}}},5951:function(e,t,n){n.d(t,{O:function(){return l}});var a=n(9876),s=n(5586),o=n(1098);const{getCarSellPostValue:r}=(0,o.Z)(),l=(0,a.Q_)("adPackageStore",{state:()=>({selectPackage:null,price:null,amount:null}),actions:{async fetchProducts(){const e=await(0,s.Z)()("/products"),{success:t,data:n}=e;if(t)return n},async confirmPayment(e){const t=await(0,s.Z)()("/confirm-payment/"+e,{method:"POST"}),{success:n}=t;return n},async proceedPaymemnt(){const e=r("post_id"),t=await(0,s.Z)()("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lineItems:[{price:this.price,quantity:1}],success_url:"http://archiiii.github.io/tabs/sell-car/payment-success",cancel_url:"http://archiiii.github.io/tabs/sell-car/ad-select",amount:this.amount,post_id:e})}),{url:n,session_id:a}=t;console.log(n),window.location.replace(n)}}})},1120:function(e,t,n){n.d(t,{rh:function(){return a.r},iZ:function(){return i},GD:function(){return d}});var a=n(6427),s=n(9876),o=n(5586),r=n(8839),l=n(4934);const i=(0,s.Q_)("managePostStore",{state:()=>({managePostList:[]}),getters:{getManagePost:e=>t=>{const n=e.managePostList.filter((e=>e.post_id==t))[0];return console.log(n),n}},actions:{async fetchManagePost(e){try{const t=await(0,o.Z)()(`/api/car-posts/manage/${e}`,{method:"GET"}),{success:n,data:a,message:s}=t;if(n){const e=(0,l.yE)(r.f,a);return this.managePostList=e,a}return s}catch(t){console.log(t)}}}});var c=n(8206),u=n(6252);const d=(0,s.Q_)("modelDetailsStore",{state:()=>({getFilterList:e=>(0,u.Fl)((()=>[])),generationList:[],versionList:[],dependArray:[]}),getters:{isVersionDisabled:e=>t=>{const n=e.getFilterList("generation"),a=n.value.map((t=>{const n=e.generationList.indexOf(t);return e.dependArray[n]})),s=e=>e[t];return!a.every(s)},isGenerationDisabled:e=>t=>{const n=e.getFilterList("version"),a=n.value.map((t=>{const n=e.versionList.indexOf(t);return n})),s=n=>e.dependArray[t][n];return!a.every(s)}},actions:{async fetchModelGenerationVersion(e,t){const{getFilterList:n}=(0,c.ZP)(e,t);this.getFilterList=n;try{const e=await(0,o.Z)()("/api/options/car-model-details/"+t),{success:n,data:a,message:s}=e;n&&(this.generationList=a.generationsList,this.versionList=a.versionList,this.dependArray=a.dependArray)}catch(a){console.log(a)}}}});n(5951)},9974:function(e,t,n){n.d(t,{Z:function(){return b}});var a=n(1989),s=n(8527),o=n(6252),r=n(9963),l=n(3577);const i=["onClick"],c={class:"grid grid-cols-2 justify-center list-disc"},u={key:0},d={key:1},f={key:2},g={key:0},m={key:1},p={key:2},y={key:3},v={key:0},w={key:4};function _(e,t,n,_,S,k){const C=(0,o.up)("font-awesome-icon"),h=s.Z,Z=a.Dq,P=a.tO,b=a.Zi,I=a.FN,L=a.PM;return(0,o.wg)(),(0,o.j4)(L,{class:"m-0 sm:w-full ion-activatable",button:e.button,onClick:t[0]||(t[0]=(0,r.iM)((t=>e.$emit("toCarPost")),["stop"]))},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"img"),(0,o.Wm)(b,{class:"pb-2 pl-3"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"font-bold text-xl flex justify-between"},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,l.zw)(e.carPost.name),1),e.like?((0,o.wg)(),(0,o.j4)(h,{post_id:`${e.post_id}`,key:e.post_id},{default:(0,o.w5)((({likeHandler:e,isLiked:t})=>[(0,o._)("div",{onClick:(0,r.iM)(e,["stop"])},[t?((0,o.wg)(),(0,o.j4)(C,{key:0,class:"text-red-500",icon:"fa-solid fa-heart"})):((0,o.wg)(),(0,o.j4)(C,{key:1,icon:"fa-regular fa-heart"}))],8,i)])),_:1},8,["post_id"])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(P,{class:"font-semibold text-lg mt-0"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.carPost.listing_price),1)])),_:1})])),_:1}),(0,o.Wm)(I,{class:"border-t"},{default:(0,o.w5)((()=>[(0,o._)("div",c,[e.carSpec.model["body-type"]?((0,o.wg)(),(0,o.iD)("li",u,(0,l.zw)(e.$t(e.carSpec.model["body-type"])),1)):(0,o.kq)("",!0),e.transmission?((0,o.wg)(),(0,o.iD)("li",d,(0,l.zw)(e.$t(e.transmission)),1)):(0,o.kq)("",!0),e.carSpec["Cylinder"]||e.carSpec["Engine Size"]||e.carSpec["Fuel type"]?((0,o.wg)(),(0,o.iD)("li",f,[e.carSpec["Cylinder"]?((0,o.wg)(),(0,o.iD)("span",g,(0,l.zw)(e.carSpec["Cylinder"])+"cyl ",1)):(0,o.kq)("",!0),e.carSpec["Engine Size"]?((0,o.wg)(),(0,o.iD)("span",m,(0,l.zw)(e.roundOf(e.carSpec["Engine Size"]/1e3,1).toFixed(1))+"L ",1)):(0,o.kq)("",!0),e.carSpec["Fuel type"]?((0,o.wg)(),(0,o.iD)("span",p," T "+(0,l.zw)(e.$t(e.carSpec["Fuel type"])),1)):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o._)("li",null,(0,l.zw)(e.mileage),1),e.carSpec["Horsepower"]?((0,o.wg)(),(0,o.iD)("li",y,[e.carSpec["Horsepower"]?((0,o.wg)(),(0,o.iD)("span",v,(0,l.zw)(Math.round(e.carSpec["Horsepower"]))+"hp ",1)):(0,o.kq)("",!0)])):(0,o.kq)("",!0),e.carSpec["Air Induction"]?((0,o.wg)(),(0,o.iD)("li",w,(0,l.zw)(e.$t(e.carSpec["Air Induction"])),1)):(0,o.kq)("",!0)]),(0,o.WI)(e.$slots,"default")])),_:3})])),_:3},8,["button"])}var S=n(2262),k=n(9732),C=n(8839),h=(0,o.aZ)({name:"CarPostCard",components:{IonCardHeader:a.Zi,IonCardTitle:a.Dq,IonCardContent:a.FN,IonCardSubtitle:a.tO,LikeManager:s.Z},props:{carPost:{type:C.f,required:!0},button:{type:Boolean,default:!1},like:{type:Boolean,default:!0}},setup(e){const{carPost:t}=(0,S.BK)(e),n=t.value.car,a=t.value.post_id,s=t.value._mileage,o=t.value["transmission"];return{roundOf:k.qN,carSpec:n,post_id:a,mileage:s,transmission:o}}}),Z=n(3744);const P=(0,Z.Z)(h,[["render",_]]);var b=P},6e3:function(e,t,n){n.d(t,{Z:function(){return f}});var a=n(3181),s=n(1989),o=n(6252);function r(e,t,n,r,l,i){const c=s.Xz,u=a.o5,d=a.tq;return(0,o.wg)(),(0,o.j4)(d,{pagination:!0,modules:e.modules,class:"max-w-screen"},{default:(0,o.w5)((()=>[0==e.carImgsData.length?((0,o.wg)(),(0,o.j4)(u,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{src:"/assets/imgs/not-found-image.jpg"},null,8,["src"])])),_:1})):((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.carImgsData,((t,n)=>((0,o.wg)(),(0,o.j4)(u,{key:t},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{src:t,onIonError:t=>e.carImgsData[n]="/assets/imgs/not-found-image.jpg"},null,8,["src","onIonError"])])),_:2},1024)))),128))])),_:1},8,["modules"])}var l=n(2262),i=(n(6162),n(1911)),c=(0,o.aZ)({name:"ImgsSlider",components:{Swiper:a.tq,SwiperSlide:a.o5},props:{carImgs:{type:Array,required:!0}},setup(e){const t=(0,l.iH)([...e.carImgs]);return{modules:[i.tl],carImgsData:t}}}),u=n(3744);const d=(0,u.Z)(c,[["render",r],["__scopeId","data-v-7476ab1c"]]);var f=d},8527:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(6252);function s(e,t,n,s,o,r){return(0,a.WI)(e.$slots,"default",{isLiked:e.isLiked,likeHandler:e.likeHandler})}n(6699);var o=n(7724),r=n(7875),l=n(5052),i=(0,a.aZ)({name:"LikeManager",props:["post_id"],setup(e){const{likedPost:t}=(0,r.Z)(),{getAuthUser:n}=(0,l.Z)(),s=(0,a.Fl)((()=>t.value.includes(`${e.post_id}`))),i=async()=>{if(await(0,o.jY)(n.value.uid,`${e.post_id}`,s.value),s.value){const n=t.value.indexOf(`${e.post_id}`);t.value.splice(n,1)}else t.value.push(`${e.post_id}`)};return{isLiked:s,likeHandler:i}}}),c=n(3744);const u=(0,c.Z)(i,[["render",s]]);var d=u},7222:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(6252),s=n(2262),o=n(5586),r=(0,a.aZ)({props:["type","id"],async setup(e){let t,n;const r=e,l=async()=>{const e="/api/"+r.type+"/img/"+r.id,t=await(0,o.Z)(!1)(e),{success:n,data:a,message:s}=t;if(n)return a;console.log(s)},{imgs:i,urls:c}=([t,n]=(0,a.mv)((()=>l())),t=await t,n(),t);return(e,t)=>(0,a.WI)(e.$slots,"default",{urls:(0,s.SU)(c),imgs:(0,s.SU)(i)})}});const l=r;var i=l},2579:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=n(7115),s=n(1989),o=n(6252),r=n(3577);const l={class:"w-full"};function i(e,t,n,i,c,u){const d=s.wd,f=s.Q$,g=s.GO,m=s.cJ,p=s.sr,y=s.wh,v=a.Z;return(0,o.wg)(),(0,o.j4)(v,{backfunction:!0,onBackFunction:t[1]||(t[1]=t=>e.$router.push("/tabs/sell-car"))},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"text-2xl font-bold py-2"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.$t("Manage listing")),1)])),_:1}),(0,o.Wm)(m,{onIonChange:t[0]||(t[0]=t=>e.segmentChanged(t)),value:e.segmentValue,class:"bg-gray-100 h-4 rounded-3xl border-4 border-gray-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{value:"selling"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"normal-case font-semibold"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.$t("Selling")),1)])),_:1})])),_:1}),(0,o.Wm)(g,{value:"sold"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"normal-case font-semibold"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.$t("Sold")),1)])),_:1})])),_:1}),(0,o.Wm)(g,{value:"drafts"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"normal-case font-semibold"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.$t("Drafts")),1)])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),(0,o._)("div",l,[((0,o.wg)(),(0,o.j4)(o.n4,null,{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.segmentValue+"-seg")))])),fallback:(0,o.w5)((()=>[(0,o.Wm)(y)])),_:1}))])])),_:1})}var c=n(2262),u=n(9974),d=n(7222),f=n(6e3);function g(e,t,n,a,s,r){const l=f.Z,i=d.Z,c=u.Z;return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.ownPosts,(t=>((0,o.wg)(),(0,o.j4)(c,{carPost:t,button:"",key:t.post_id,like:!1,onToCarPost:n=>e.$router.push(`manage/${t.post_id}`)},{img:(0,o.w5)((()=>[(0,o.Wm)(i,{type:"car-posts",id:t.post_id},{default:(0,o.w5)((({urls:e})=>[(0,o.Wm)(l,{carImgs:e},null,8,["carImgs"])])),_:2},1032,["id"])])),_:2},1032,["carPost","onToCarPost"])))),128)}var m=n(5052),p=n(9732),y=n(1120),v=n(4934),w=n(8839),_=(0,o.aZ)({name:"SellingSeg",components:{CarPostCard:u.Z,ImgsSlider:f.Z,ImgManager:d.Z},async setup(e,{emit:t}){const{getAuthUser:n}=(0,m.Z)(),a=(0,y.iZ)();let s=await a.fetchManagePost(n.value.uid);return s=(0,v.yE)(w.f,s),{ownPosts:s,priceFormatter:p.L6}}}),S=n(3744);const k=(0,S.Z)(_,[["render",g]]);var C=k,h=(0,o.aZ)({name:"ManagePage",components:{IonSegment:s.cJ,IonSegmentButton:s.GO,IonToolbar:s.sr,SellingSeg:C},setup(){const e=(0,c.iH)("selling"),t=t=>{e.value=t.detail.value};return{segmentChanged:t,segmentValue:e}}});const Z=(0,S.Z)(h,[["render",i],["__scopeId","data-v-7f0267f8"]]);var P=Z}}]);
//# sourceMappingURL=6846.e38ae229.js.map
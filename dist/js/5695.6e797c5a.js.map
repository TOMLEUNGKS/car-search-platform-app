{"version":3,"file":"js/5695.6e797c5a.js","mappings":"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","sources":["webpack://ionic-car-trading/./src/hooks/chat/useChat.ts","webpack://ionic-car-trading/./src/components/Users/UserAvatar.vue","webpack://ionic-car-trading/./src/components/Users/UserAvatar.vue?bf7c","webpack://ionic-car-trading/./src/components/Chats/ChatsLayout.vue?ecfe","webpack://ionic-car-trading/./src/components/Chats/ChatsLayout.vue","webpack://ionic-car-trading/./src/components/Chats/ChatsLayout.vue?5da8","webpack://ionic-car-trading/./src/functional/Chat/UserChatManager.vue?e921","webpack://ionic-car-trading/./src/functional/Chat/UserChatManager.vue","webpack://ionic-car-trading/./src/functional/Chat/UserChatManager.vue?828d","webpack://ionic-car-trading/./src/components/Chats/UsersContainer.vue","webpack://ionic-car-trading/./src/components/Chats/UsersContainer.vue?a167","webpack://ionic-car-trading/./src/views/Chat/ChatPage.vue?41d8","webpack://ionic-car-trading/./src/components/Chats/SearchBar.vue?5553","webpack://ionic-car-trading/./src/components/Chats/SearchBar.vue","webpack://ionic-car-trading/./src/components/Chats/SearchBar.vue?2b76","webpack://ionic-car-trading/./src/views/Chat/ChatPage.vue","webpack://ionic-car-trading/./src/views/Chat/ChatPage.vue?0c90"],"sourcesContent":["import \"core-js/modules/es.array.includes.js\";\nimport { ref, reactive } from \"vue\";\nconst {\n  getAuthUser\n} = useAuthUser();\nconst currentUser = getAuthUser;\nconst chatState = reactive({\n  chatId: \"null\",\n  user: {\n    uid: \"\"\n  }\n});\nconst userChats = ref([]);\nfunction filterUserChats(searchStr) {\n  return userChats.value.filter(ele => ele[1].userInfo.displayName.includes(searchStr));\n}\nasync function setChatStateByUserId(uid) {\n  const payload = await getUserChatsByTargetID(getAuthUser.value.uid, uid);\n  console.log(payload);\n  setChatState(payload[1].userInfo);\n}\nfunction setChatState(payload) {\n  chatState.chatId = currentUser.value.uid > payload.uid ? currentUser.value.uid + payload.uid : payload.uid + currentUser.value.uid;\n  chatState.user = payload;\n}\nexport default function useChat() {\n  return {\n    chatState,\n    userChats,\n    setChatState,\n    filterUserChats,\n    setChatStateByUserId\n  };\n}","import { defineComponent as _defineComponent } from 'vue';\nimport { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport default /*#__PURE__*/_defineComponent({\n  props: [\"src\", \"alt\"],\n  setup(__props) {\n    return (_ctx, _cache) => {\n      const _component_ion_img = _resolveComponent(\"ion-img\");\n      return _openBlock(), _createBlock(_component_ion_img, {\n        alt: __props.alt,\n        src: __props.src\n      }, null, 8, [\"alt\", \"src\"]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./UserAvatar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./UserAvatar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./UserAvatar.vue?vue&type=style&index=0&id=7c013d27&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7c013d27\"]])\n\nexport default __exports__","import { renderSlot as _renderSlot, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_BaseBackLayout = _resolveComponent(\"BaseBackLayout\");\n  return _openBlock(), _createBlock(_component_BaseBackLayout, null, {\n    default: _withCtx(() => [_renderSlot(_ctx.$slots, \"default\")]),\n    _: 3\n  });\n}","import { defineComponent } from \"vue\";\nimport BaseBackLayout from \"@/components/Common/BaseBackLayout.vue\";\nimport { isPlatform } from \"@ionic/vue\";\nexport default defineComponent({\n  components: {\n    BaseBackLayout\n  },\n  setup() {\n    return {\n      isPlatform\n    };\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./ChatsLayout.vue?vue&type=template&id=ca7c94fa&ts=true\"\nimport script from \"./ChatsLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatsLayout.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderSlot as _renderSlot } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _renderSlot(_ctx.$slots, \"default\");\n}","import { defineComponent } from \"vue\";\nimport useChat from \"@/hooks/chat/useChat\";\nimport { getAllUserChats } from \"@/services/firebase\";\nimport useAuthUser from \"@/hooks//user/useAuthUser\";\nexport default defineComponent({\n  async setup(props) {\n    const {\n      userChats\n    } = useChat();\n    const {\n      getAuthUser\n    } = useAuthUser();\n    const res = await getAllUserChats(getAuthUser.value.uid);\n    userChats.value = res;\n    return {};\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./UserChatManager.vue?vue&type=template&id=37084678&ts=true\"\nimport script from \"./UserChatManager.vue?vue&type=script&lang=ts\"\nexport * from \"./UserChatManager.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/* unplugin-vue-components disabled */import __unplugin_components_0 from '/Users/tomleung/Documents/CarSearch project/Car-Trading-App/src/components/Users/UserAvatar.vue';\nimport { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode } from \"vue\";\nconst _hoisted_1 = [\"onClick\"];\nconst _hoisted_2 = {\n  class: \"userChatInfo w-full\"\n};\nconst _hoisted_3 = {\n  class: \"font-medium\"\n};\nconst _hoisted_4 = {\n  class: \"flex justify-between\"\n};\nconst _hoisted_5 = {\n  class: \"text-gray-500 text-sm\"\n};\nconst _hoisted_6 = {\n  class: \"text-gray-500 text-sm\"\n};\nimport moment from \"moment\";\nexport default /*#__PURE__*/_defineComponent({\n  props: [\"searchText\"],\n  setup(__props) {\n    const props = __props;\n    const router = useRouter();\n    const searchText = toRef(props, \"searchText\");\n    watch(searchText, newValue => {\n      handleSearchStr(newValue);\n    });\n    const {\n      userChats,\n      filterUserChats\n    } = useChat();\n    let filterResults = ref(userChats.value);\n    const handleSearchStr = value => {\n      if (value) {\n        filterResults.value = filterUserChats(value);\n      } else {\n        filterResults.value = userChats.value;\n      }\n    };\n    const handleSelect = user => {\n      router.push(\"/message/\" + user.uid);\n    };\n    return (_ctx, _cache) => {\n      const _component_UserAvatar = __unplugin_components_0;\n      return _openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filterResults), chat => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: chat[0],\n          onClick: $event => handleSelect(chat[1].userInfo),\n          class: \"userChat p-4 flex items-center gap-4 cursor-pointer hover:bg-gray-200\"\n        }, [_createVNode(_component_UserAvatar, {\n          src: chat[1].userInfo.photoURL,\n          alt: \"\"\n        }, null, 8, [\"src\"]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"span\", _hoisted_3, _toDisplayString(chat[1].userInfo.displayName), 1), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"p\", _hoisted_5, _toDisplayString(chat[1].lastMessage?.text), 1), _createElementVNode(\"p\", _hoisted_6, _toDisplayString(_unref(moment)(chat[1].date.toDate()).format(\"DD MMM HH:mm\")), 1)])])], 8, _hoisted_1);\n      }), 128);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./UsersContainer.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./UsersContainer.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, Suspense as _Suspense, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ChatsSearchBar = _resolveComponent(\"ChatsSearchBar\");\n  const _component_UsersContainer = _resolveComponent(\"UsersContainer\");\n  const _component_user_chat_manager = _resolveComponent(\"user-chat-manager\");\n  const _component_ion_loading = _resolveComponent(\"ion-loading\");\n  const _component_ChatsLayout = _resolveComponent(\"ChatsLayout\");\n  return _openBlock(), _createBlock(_component_ChatsLayout, null, {\n    default: _withCtx(() => [_createVNode(_component_ChatsSearchBar, {\n      modelValue: _ctx.searchText,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.searchText = $event)\n    }, null, 8, [\"modelValue\"]), (_openBlock(), _createBlock(_Suspense, null, {\n      default: _withCtx(() => [_createVNode(_component_user_chat_manager, null, {\n        default: _withCtx(() => [_createVNode(_component_UsersContainer, {\n          searchText: _ctx.searchText\n        }, null, 8, [\"searchText\"])]),\n        _: 1\n      })]),\n      fallback: _withCtx(() => [_createVNode(_component_ion_loading)]),\n      _: 1\n    }))]),\n    _: 1\n  });\n}","import { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ee235426\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"searchForm p-4\"\n};\nconst _hoisted_2 = [\"placeholder\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"outline-none w-full\",\n    type: \"text\",\n    placeholder: _ctx.$t('Find a user'),\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.searchText = $event)\n  }, null, 8, _hoisted_2), [[_vModelText, _ctx.searchText]])])]);\n}","import { computed, defineComponent } from \"vue\";\nexport default defineComponent({\n  props: {\n    modelValue: String\n  },\n  setup(props, {\n    emit\n  }) {\n    const searchText = computed({\n      get: () => props.modelValue,\n      set: value => emit(\"update:modelValue\", value)\n    });\n    return {\n      searchText\n    };\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./SearchBar.vue?vue&type=template&id=ee235426&scoped=true&ts=true\"\nimport script from \"./SearchBar.vue?vue&type=script&lang=ts\"\nexport * from \"./SearchBar.vue?vue&type=script&lang=ts\"\n\nimport \"./SearchBar.vue?vue&type=style&index=0&id=ee235426&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ee235426\"]])\n\nexport default __exports__","import ChatsLayout from \"@/components/Chats/ChatsLayout.vue\";\nimport UsersContainer from \"@/components/Chats/UsersContainer.vue\";\nimport ChatsSearchBar from \"@/components/Chats/SearchBar.vue\";\nimport UserChatManager from \"@/functional/Chat/UserChatManager.vue\";\nimport { IonLoading } from \"@ionic/vue\";\nimport { defineComponent, ref } from \"vue\";\nexport default defineComponent({\n  components: {\n    ChatsLayout,\n    UsersContainer,\n    ChatsSearchBar,\n    IonLoading,\n    UserChatManager\n  },\n  setup() {\n    const searchText = ref(\"\");\n    return {\n      searchText\n    };\n  }\n});","/* unplugin-vue-components disabled */import { render } from \"./ChatPage.vue?vue&type=template&id=7c633259&ts=true\"\nimport script from \"./ChatPage.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatPage.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/tomleung/Documents/CarSearch project/Car-Trading-App/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["getAuthUser","currentUser","chatState","chatId","user","uid","userChats","filterUserChats","searchStr","value","filter","ele","userInfo","displayName","includes","async","setChatStateByUserId","payload","console","log","setChatState","useChat","props","setup","__props","_ctx","_cache","_component_ion_img","alt","src","__exports__","render","$props","$setup","$data","$options","_component_BaseBackLayout","default","$slots","_","components","BaseBackLayout","isPlatform","useAuthUser","res","_hoisted_1","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","router","searchText","newValue","handleSearchStr","filterResults","handleSelect","push","_component_UserAvatar","chat","key","onClick","$event","photoURL","lastMessage","text","date","toDate","format","_component_ChatsSearchBar","_component_UsersContainer","_component_user_chat_manager","_component_ion_loading","_component_ChatsLayout","modelValue","fallback","type","placeholder","$t","String","emit","get","set","ChatsLayout","UsersContainer","ChatsSearchBar","IonLoading","UserChatManager"],"sourceRoot":""}